<!DOCTYPE html>
<html>
<head>
  <title> Vef Verkefni 2</title>
  <script src="VefVerk2/js/jquery-1.11.3.min.js"></script>

  <link rel="stylesheet" type="text/css" href="VefVerk2/css/foundation.css">
  <link rel="stylesheet" type="text/css" href="VefVerk2/css/custom.css">
  <meta charset="UTF-8">
</head>
<body>
<div class="header">
	<h1>Heimo!</h1>
</div>
<div class="row">
	<div class="large-12 large-centered columns">
		<label>Search bar
			<input type="text" id="searchbar" />
		</label>
		<!-- <input type="button" id="submit" value="Search"> -->
	</div>
	<div class="large-12 large-centered columns result">
	</div>
</div>
<script>
$(document).ready(function() {
	$("#searchbar").on("input",function(){
		var data = $("#searchbar").val();
		$.ajax({
			'url': 'http://apis.is/address',
			'type': 'GET',
			'dataType': 'json',
			'data': {'address': data},
			'success': function(response) {
				$(".result").empty();
				Object.size = function(response) {
				    var size = 0, key;
				    for (key in response) {
				        if (response.hasOwnProperty(key)) size++;
				    }
				    return size;
				};
				for (var i = 0; i < Object.size(response.results); i++) {
					console.log(response.results[i])
					$('.result').append("<br><span>" + response.results[i].street+" ");
					$('.result').append(response.results[i].house+"<br>");
					$('.result').append(response.results[i].city+"<br>Póstnúmer:");
					$('.result').append(response.results[i].zip+"<br>");
					$('.result').append(response.results[i].apartment+"<br>");
					$('.result').append(response.results[i].letter+"</span>");
				};
				// $(response).each(function(i, response){
				// 	console.log(response.results[i])
				// 	$('.result').append(response.results[i].street);
				// });
		  		// $(".street").text(response.results['street']);
		  		// $(".house").text(response.results['house']);
		  		// $(".city").text(response.results['city']);
		  		// $(".zip").text(response.results['zip']);
		  		// $(".apartment").text(response.results['street']);
		  		// $(".letter").text(response.results['street']);
			}
		})
	});	
});
</script>
</body>
</html>